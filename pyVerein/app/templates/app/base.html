{% load static %} {% load i18n %} {% load menu %}
<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
        {% block page_title %}
        {% endblock page_title %}
    </title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Materialdesign -->
    <link rel="stylesheet" href="{% static 'app/css/material.css' %}">
    <link rel="stylesheet" href="{% static 'app/vendors/material-icons/material-icons.css' %}">
    <link rel="stylesheet" href="{% static 'app/vendors/abel/abel.css' %}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'app/vendors/font-awesome/css/fontawesome-all.min.css' %}">
    <!-- Animate.css -->
    <link rel="stylesheet" href="{% static 'app/vendors/animate.css/animate.css' %}">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    {% block head %} {% endblock %}
    <!-- Custom Styles -->
    <link rel="stylesheet" href="{% static 'app/css/app.css' %}">
</head>

<body class="mdc-typography">
    {% include "app/_drawer.html" %}
    <div class="main">
        <header class="mdc-top-app-bar mdc-top-app-bar--fixed">
            <div class="mdc-top-app-bar__row">
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                    <a href="#" class="material-icons mdc-top-app-bar__navigation-icon menu">menu</a>
                    <span class="mdc-top-app-bar__title">{% block title %} {% endblock %}</span>
                </section>
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
                    {{ user.get_full_name }}<img src="{% static 'app/images/avatar.svg' %}" alt="" class="user-image mdc-elevation--z4">
                </section>
            </div>
        </header>
        <section class="main mdc-top-app-bar--fixed-adjust">
            {% block content %} {% endblock %}
        </section>
        {% include "app/_attributions.html" %}
        <footer id="page-footer">
            pyVerein by Jannik Heuer&nbsp;|&nbsp;<a href="javascript:showAttributions();" class="mdc-theme--on-primary">{% trans 'Attributions' %}</a>
        </footer>
    </div>

    <script src="{% static 'app/vendors/jquery/dist/jquery.min.js' %}"></script> 
    <script src="{% static 'app/vendors/notify/notify.js' %}"></script> 

    <script>
        {% if messages %}
            var messages = [
                {% for message in messages %}
                    {
                        tags: "{{ message.tags }}",
                        message: "{{ message }}"
                    },
                {% endfor %}
            ];
            messages.forEach(function(message){
                if(message['tags'] == 'error'){
                    delay = 0;
                }
                else{
                    delay = 5000;
                }
                $.notify({
                    message: message['message']
                },{
                    type: 'minimalist',
                    delay: delay,
                    allow_dismiss: true,
                    newest_on_top: true,
                    animate: {
                        exit: 'animated fadeOutRight'
                    },
                    offset: {
                        x: 20,
                        y: 70
                    },
                    template: '<div data-notify="container" class="alert alert-{0} ' + message['tags'] + '">' +
                        '<button aria-hidden="true" class="mdc-button close" data-notify="dismiss"><i class="mdc-button__icon fa fa-times" aria-hidden="true"></i></button>' +
                        '<span data-notify="message">{2}</span>' +
                    '</div>'
                });
            })
        {% endif %}
        {% if form.errors %}
            var form_errors = [
                {% for error in form.non_field_errors %}
                    {
                        error: "{{ error }}"
                    },
                {% endfor %}
                {% for field in form %}
                    {% for error in field.errors %}
                        {
                            error: "{{ error }}"
                        },
                    {% endfor %}
                {% endfor %}
            ];
            form_errors.forEach(function(error){
                $.notify({
                    message: error['error']
                },{
                    type: 'minimalist',
                    delay: 0,
                    allow_dismiss: true,
                    newest_on_top: true,
                    animate: {
                        exit: 'animated fadeOutRight'
                    },
                    offset: {
                        x: 20,
                        y: 70
                    },
                    template: '<div data-notify="container" class="alert alert-{0} error">' +
                        '<button aria-hidden="true" class="mdc-button close" data-notify="dismiss"><i class="mdc-button__icon fa fa-times" aria-hidden="true"></i></button>' +
                        '<span data-notify="message">{2}</span>' +
                    '</div>'
                });
            });
        {% endif %}
    </script>
    <script src="{% static 'app/js/material-components-web.js' %}"></script> 
    <script src="{% static 'app/js/material.js' %}"></script> 
    {% block foot %} {% endblock %}

</body>

</html>